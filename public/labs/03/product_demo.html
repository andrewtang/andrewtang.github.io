<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager Demo - MotherDuck</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@11.0.8/dist/framer-motion.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'JetBrains Mono', monospace;
        }

        .typing-cursor {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
    </style>
</head>
<body class="bg-[#E8E3DB] min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { motion, AnimatePresence } = Motion;
        const { useState, useEffect, useRef } = React;

        function ProductDemo() {
            const [tasks, setTasks] = useState([]);
            const [currentInput, setCurrentInput] = useState('');
            const [selectedPriority, setSelectedPriority] = useState(null);
            const [isTyping, setIsTyping] = useState(false);
            const [currentTaskIndex, setCurrentTaskIndex] = useState(0);
            const [showCursor, setShowCursor] = useState(false);

            const demoTasks = [
                { text: 'Review Q4 financial reports', priority: 'high' },
                { text: 'Update team documentation', priority: 'medium' },
                { text: 'Schedule client meeting', priority: 'high' },
                { text: 'Refactor authentication module', priority: 'low' },
                { text: 'Design new landing page', priority: 'medium' }
            ];

            const stats = {
                total: tasks.length,
                active: tasks.filter(t => !t.completed).length,
                completed: tasks.filter(t => t.completed).length,
                progress: tasks.length > 0 ? Math.round((tasks.filter(t => t.completed).length / tasks.length) * 100) : 0
            };

            // Typing animation effect
            useEffect(() => {
                if (currentTaskIndex >= demoTasks.length) {
                    setTimeout(() => {
                        setTasks([]);
                        setCurrentTaskIndex(0);
                    }, 3000);
                    return;
                }

                const currentTask = demoTasks[currentTaskIndex];
                const fullText = currentTask.text;

                // Wait before starting to type
                const startDelay = setTimeout(() => {
                    setIsTyping(true);
                    setShowCursor(true);
                    setSelectedPriority(null);
                    setCurrentInput('');

                    let charIndex = 0;
                    const typingInterval = setInterval(() => {
                        if (charIndex <= fullText.length) {
                            setCurrentInput(fullText.slice(0, charIndex));
                            charIndex++;
                        } else {
                            clearInterval(typingInterval);
                            setIsTyping(false);

                            // Select priority
                            setTimeout(() => {
                                setSelectedPriority(currentTask.priority);

                                // Add task
                                setTimeout(() => {
                                    const newTask = {
                                        id: Date.now(),
                                        text: fullText,
                                        priority: currentTask.priority,
                                        completed: false,
                                        createdAt: new Date().toLocaleString()
                                    };
                                    setTasks(prev => [newTask, ...prev]);
                                    setCurrentInput('');
                                    setSelectedPriority(null);
                                    setShowCursor(false);
                                    setCurrentTaskIndex(prev => prev + 1);
                                }, 500);
                            }, 300);
                        }
                    }, 80);

                    return () => clearInterval(typingInterval);
                }, currentTaskIndex === 0 ? 1000 : 800);

                return () => clearTimeout(startDelay);
            }, [currentTaskIndex, tasks.length]);

            const toggleTask = (id) => {
                setTasks(prev => prev.map(t =>
                    t.id === id ? { ...t, completed: !t.completed } : t
                ));
            };

            const getPriorityColor = (priority) => {
                switch(priority) {
                    case 'high': return 'bg-[#EF4444] text-white border-[#EF4444]';
                    case 'medium': return 'bg-[#FFD500] border-[#FFD500]';
                    case 'low': return 'bg-[#2FB5A0] text-white border-[#2FB5A0]';
                    default: return 'bg-white text-[#666666] border-[#DDDDDD]';
                }
            };

            return (
                <div className="min-h-screen p-5 md:p-10 relative">
                    {/* Back Button - Top Left */}
                    <motion.div
                        initial={{ opacity: 0, y: -20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ duration: 0.6, delay: 0.5 }}
                        className="absolute top-6 left-6 md:top-12 md:left-12 z-50"
                    >
                        <a
                            href="/labs"
                            className="inline-block text-sm font-medium uppercase tracking-wider text-[#666666] hover:text-black transition-colors"
                            style={{ letterSpacing: '1.5px' }}
                        >
                            ‚Üê Labs
                        </a>
                    </motion.div>

                    <div className="max-w-[800px] mx-auto pt-16 md:pt-24">
                        {/* Header */}
                        <motion.header
                            className="mb-10"
                            initial={{ opacity: 0, y: -20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.6 }}
                        >
                            <h1 className="text-5xl font-light mb-2" style={{ letterSpacing: '2px' }}>
                                MY TASKS
                            </h1>
                            <p className="text-sm font-medium text-[#666666]" style={{ letterSpacing: '0.5px' }}>
                                PERSONAL TODO MANAGEMENT SYSTEM
                            </p>
                        </motion.header>

                        {/* Stats Bar */}
                        <motion.div
                            className="flex gap-0 mb-8 bg-white border border-[#DDDDDD]"
                            style={{ boxShadow: '0 4px 12px rgba(0,0,0,0.15)' }}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.6, delay: 0.2 }}
                        >
                            <div className="flex-1 text-center p-5 border-r border-[#E0E0E0]">
                                <motion.div
                                    className="text-[32px] font-semibold text-[#4A9FD8] mb-1"
                                    key={stats.total}
                                    initial={{ scale: 1.5, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    transition={{ type: "spring", stiffness: 300 }}
                                >
                                    {stats.total}
                                </motion.div>
                                <div className="text-xs text-[#666666] uppercase" style={{ letterSpacing: '0.5px' }}>
                                    Total
                                </div>
                            </div>
                            <div className="flex-1 text-center p-5 border-r border-[#E0E0E0]">
                                <motion.div
                                    className="text-[32px] font-semibold text-[#4A9FD8] mb-1"
                                    key={stats.active}
                                    initial={{ scale: 1.5, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    transition={{ type: "spring", stiffness: 300 }}
                                >
                                    {stats.active}
                                </motion.div>
                                <div className="text-xs text-[#666666] uppercase" style={{ letterSpacing: '0.5px' }}>
                                    Active
                                </div>
                            </div>
                            <div className="flex-1 text-center p-5 border-r border-[#E0E0E0]">
                                <motion.div
                                    className="text-[32px] font-semibold text-[#10B981] mb-1"
                                    key={stats.completed}
                                    initial={{ scale: 1.5, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    transition={{ type: "spring", stiffness: 300 }}
                                >
                                    {stats.completed}
                                </motion.div>
                                <div className="text-xs text-[#666666] uppercase" style={{ letterSpacing: '0.5px' }}>
                                    Completed
                                </div>
                            </div>
                            <div className="flex-1 text-center p-5">
                                <motion.div
                                    className="text-[32px] font-semibold text-[#4A9FD8] mb-1"
                                    key={stats.progress}
                                    initial={{ scale: 1.5, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    transition={{ type: "spring", stiffness: 300 }}
                                >
                                    {stats.progress}%
                                </motion.div>
                                <div className="text-xs text-[#666666] uppercase" style={{ letterSpacing: '0.5px' }}>
                                    Progress
                                </div>
                            </div>
                        </motion.div>

                        {/* Input Section */}
                        <motion.div
                            className="bg-white border border-[#DDDDDD] p-6 mb-8"
                            style={{ boxShadow: '0 4px 12px rgba(0,0,0,0.15)' }}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.6, delay: 0.3 }}
                        >
                            <div className="flex flex-col md:flex-row gap-3 mb-4">
                                <div className="flex-1 relative">
                                    <motion.input
                                        type="text"
                                        value={currentInput}
                                        readOnly
                                        placeholder="What needs to be done?"
                                        className="w-full px-4 py-3.5 text-sm font-medium border-2 border-[#DDDDDD] bg-white text-black transition-colors"
                                        style={{ letterSpacing: '0.3px' }}
                                        animate={{
                                            borderColor: isTyping ? '#4A9FD8' : '#DDDDDD'
                                        }}
                                        transition={{ duration: 0.3 }}
                                    />
                                    {showCursor && (
                                        <span className="absolute right-4 top-1/2 -translate-y-1/2 typing-cursor text-black">
                                            |
                                        </span>
                                    )}
                                </div>
                                <motion.button
                                    className="px-7 py-3.5 bg-[#4A9FD8] text-white text-sm font-semibold uppercase transition-colors"
                                    style={{ letterSpacing: '1px' }}
                                    whileHover={{ backgroundColor: '#3A8FC8' }}
                                    whileTap={{ scale: 0.95 }}
                                    animate={{
                                        scale: currentInput && !isTyping && selectedPriority ? [1, 1.05, 1] : 1
                                    }}
                                    transition={{ duration: 0.3 }}
                                >
                                    ADD TASK
                                </motion.button>
                            </div>
                            <div className="flex flex-wrap gap-2">
                                {['high', 'medium', 'low'].map(priority => (
                                    <motion.button
                                        key={priority}
                                        className={`px-3 py-1.5 text-[11px] font-semibold uppercase border transition-colors ${
                                            selectedPriority === priority
                                                ? getPriorityColor(priority)
                                                : 'border-[#DDDDDD] bg-white text-[#666666]'
                                        }`}
                                        style={{ letterSpacing: '0.5px' }}
                                        animate={{
                                            scale: selectedPriority === priority ? [1, 1.1, 1] : 1
                                        }}
                                        transition={{ duration: 0.3 }}
                                    >
                                        {priority.toUpperCase()}
                                    </motion.button>
                                ))}
                            </div>
                        </motion.div>

                        {/* Task List */}
                        <motion.div
                            className="bg-white border border-[#DDDDDD] mb-6"
                            style={{ boxShadow: '0 10px 40px rgba(0,0,0,0.1)' }}
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.6, delay: 0.4 }}
                        >
                            <AnimatePresence mode="popLayout">
                                {tasks.length === 0 ? (
                                    <motion.div
                                        key="empty"
                                        className="py-20 px-10 text-center"
                                        initial={{ opacity: 0 }}
                                        animate={{ opacity: 1 }}
                                        exit={{ opacity: 0 }}
                                    >
                                        <div className="text-6xl mb-4 opacity-30">üìù</div>
                                        <div className="text-xl font-semibold mb-2 text-[#333333]">
                                            No tasks yet
                                        </div>
                                        <div className="text-sm text-[#666666]" style={{ letterSpacing: '0.3px' }}>
                                            Watch as tasks are added automatically
                                        </div>
                                    </motion.div>
                                ) : (
                                    tasks.map((task, index) => (
                                        <motion.div
                                            key={task.id}
                                            layout
                                            initial={{ opacity: 0, y: -20, scale: 0.95 }}
                                            animate={{
                                                opacity: 1,
                                                y: 0,
                                                scale: 1
                                            }}
                                            exit={{
                                                opacity: 0,
                                                scale: 0.95,
                                                transition: { duration: 0.2 }
                                            }}
                                            transition={{
                                                duration: 0.4,
                                                ease: [0.16, 1, 0.3, 1],
                                                layout: {
                                                    duration: 0.3,
                                                    ease: [0.16, 1, 0.3, 1]
                                                }
                                            }}
                                            className={`flex items-center gap-4 p-5 border-b border-[#E0E0E0] last:border-b-0 cursor-pointer hover:bg-[#fafafa] transition-colors ${
                                                task.completed ? 'opacity-60' : ''
                                            }`}
                                            onClick={() => toggleTask(task.id)}
                                        >
                                            <motion.div
                                                className={`w-6 h-6 min-w-[24px] border-2 ${
                                                    task.completed
                                                        ? 'bg-[#4A9FD8] border-[#4A9FD8]'
                                                        : 'border-[#DDDDDD]'
                                                } bg-white cursor-pointer transition-all relative flex items-center justify-center`}
                                                whileHover={{ scale: 1.1 }}
                                                whileTap={{ scale: 0.9 }}
                                            >
                                                <AnimatePresence>
                                                    {task.completed && (
                                                        <motion.span
                                                            initial={{ scale: 0, rotate: -180 }}
                                                            animate={{ scale: 1, rotate: 0 }}
                                                            exit={{ scale: 0, rotate: 180 }}
                                                            transition={{ type: "spring", stiffness: 300 }}
                                                            className="text-white text-base font-semibold"
                                                        >
                                                            ‚úì
                                                        </motion.span>
                                                    )}
                                                </AnimatePresence>
                                            </motion.div>
                                            <div className="flex-1">
                                                <div className={`text-[15px] font-medium break-words ${
                                                    task.completed ? 'line-through text-[#999999]' : 'text-black'
                                                }`} style={{ letterSpacing: '0.3px' }}>
                                                    {task.text}
                                                    {task.priority && (
                                                        <motion.span
                                                            initial={{ scale: 0, opacity: 0 }}
                                                            animate={{ scale: 1, opacity: 1 }}
                                                            transition={{ delay: 0.2 }}
                                                            className={`inline-block px-2 py-0.5 text-[10px] font-semibold uppercase ml-2 ${getPriorityColor(task.priority)}`}
                                                            style={{ letterSpacing: '0.5px' }}
                                                        >
                                                            {task.priority.toUpperCase()}
                                                        </motion.span>
                                                    )}
                                                </div>
                                                <div className="text-[11px] text-[#666666] mt-1" style={{ letterSpacing: '0.3px' }}>
                                                    Created: {task.createdAt}
                                                </div>
                                            </div>
                                            <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                                <motion.button
                                                    className="w-8 h-8 border border-[#DDDDDD] bg-white hover:bg-[#4A9FD8] hover:border-[#4A9FD8] hover:text-white flex items-center justify-center transition-all"
                                                    whileHover={{ scale: 1.1 }}
                                                    whileTap={{ scale: 0.9 }}
                                                >
                                                    <i data-lucide="pencil" className="w-4 h-4"></i>
                                                </motion.button>
                                                <motion.button
                                                    className="w-8 h-8 border border-[#DDDDDD] bg-white hover:bg-[#EF4444] hover:border-[#EF4444] hover:text-white flex items-center justify-center transition-all"
                                                    whileHover={{ scale: 1.1 }}
                                                    whileTap={{ scale: 0.9 }}
                                                >
                                                    <i data-lucide="x" className="w-4 h-4"></i>
                                                </motion.button>
                                            </div>
                                        </motion.div>
                                    ))
                                )}
                            </AnimatePresence>
                        </motion.div>

                        {/* Demo Indicator */}
                        <motion.div
                            className="text-center p-4 bg-white border border-[#DDDDDD]"
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            transition={{ delay: 0.8 }}
                        >
                            <div className="flex items-center justify-center gap-2 text-sm text-[#666666]">
                                <motion.div
                                    className="w-2 h-2 bg-[#4A9FD8] rounded-full"
                                    animate={{
                                        scale: [1, 1.5, 1],
                                        opacity: [1, 0.5, 1]
                                    }}
                                    transition={{
                                        duration: 2,
                                        repeat: Infinity,
                                        ease: "easeInOut"
                                    }}
                                />
                                <span style={{ letterSpacing: '0.3px' }}>
                                    AUTOMATED DEMO - WATCH TASKS BEING ADDED
                                </span>
                            </div>
                        </motion.div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ProductDemo />);

        // Initialize Lucide icons after React renders
        setTimeout(() => {
            lucide.createIcons();
        }, 100);

        // Re-initialize icons periodically for new elements
        setInterval(() => {
            lucide.createIcons();
        }, 500);
    </script>
</body>
</html>
